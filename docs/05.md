# ベクトルの操作

## ベクトルの演算

* ベクトル同士演算できる
* 単一要素のベクトルを演算に使うと、演算対象のベクトルの各要素に対して演算を行う
* 割り算の商（整数値）を求めるには `%/%` 演算子、割り算の余りを求めるには `%%` 演算子を使う

### `vec1.R`

``` r
x <- 1:5
x + 2
x - 2
x * 2
x / 2
x %/% 2
x %% 2
x ^ 2
```

> 乗数は `^` 演算子、`**` 演算子で求めることができます。

### 実行結果

``` r
> x <- 1:5
> x + 2
[1] 3 4 5 6 7
> x - 2
[1] -1  0  1  2  3
> x * 2
[1]  2  4  6  8 10
> x / 2
[1] 0.5 1.0 1.5 2.0 2.5
> x %/% 2
[1] 0 1 1 2 2
> x %% 2
[1] 1 0 1 0 1
> x ^ 2
[1]  1  4  9 16 25
```
---

## ベクトルの演算 - 2

* 2つのベクトルの演算するとき要素数が同じ場合は、ベクトルの要素単位で演算を行う

### `vec2.R`

```r
x <- c(1, 2, 3, 4, 5, 6)
y <- c(10, 20, 30, 40, 50, 60)
x + y
```

### 実行結果

``` r
> x <- c(1, 2, 3, 4, 5, 6)
> y <- c(10, 20, 30, 40, 50, 60)
> x + y
[1] 11 22 33 44 55 66
```
---

## ベクトルの演算 - 3

* 2つのベクトルの演算するとき要素数が同じでない場合、不足する方のベクトルを繰り返し演算に利用する
* 長い方のベクトルの要素数が短い方のベクトルの要素数で割り切れない場合は警告メッセージが表示される

### `vec3.R`

```r
x <- c(1, 2, 3, 4, 5, 6)
y <- c(10, 20, 30)
x + y
z <- c(10, 20, 30, 40, 50)
x + z
```

### 実行結果

``` r
> x + y
[1] 11 22 33 14 25 36
> z <- c(10, 20, 30, 40, 50)
> x + z
[1] 11 22 33 44 55 16
 警告メッセージ: 
 x + z で: 
   長いオブジェクトの長さが短いオブジェクトの長さの倍数になっていません 
```

---

## ベクトルの演算 - 4

* ベクトルに比較演算子を利用すると論理値のベクトルになる
* 論理積 `&` の場合はベクトルの要素単位の論理積を求める
* 論理積 `&&` の場合はベクトルの先頭要素の論理積を求める

> 論理和 `|` と `||` の挙動も同じです。

### `vec4.R`

```r
x <- 1:10
x <= 5
x %% 2 == 1
x <= 5 & x %% 2 == 1
x <= 5 && x %% 2 == 1
```

### 実行結果

``` r
> x <- 1:10
> x <= 5
 [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
> x %% 2 == 1
 [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE
> x <= 5 & x %% 2 == 1
 [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
> x <= 5 && x %% 2 == 1
[1] TRUE
```

---

## 要素の取得

* 要素番号を指定してベクトル内の要素にアクセスできる
* ベクトルを使って複数の要素番号を指定できる
* 要素番号がマイナス値の場合、対象の要素を除いたベクトルを取得できる

> ベクトルの要素番号は先頭が1から始まります。

### `vec5.R`

```r
x <- c("A", "B", "C", "D", "E")
x[1]
x[c(1, 3, 5)]
x[-2]
```

### 実行結果

``` r
> x <- c("A", "B", "C", "D", "E")
> x[1]
[1] "A"
> x[c(1, 3, 5)]
[1] "A" "C" "E"
> x[-2]
[1] "A" "C" "D" "E"
```
---

## 要素の取得 - 2

* ベクトルの要素番号の指定に論理値を使用できる

> 要素番号の指定に論理値を使用した場合、`TRUE` に該当する要素のみ抽出されます。

### `vec6.R`

```r
x <- 1:10
x[x > 5]
x[x %% 2 == 0]
y <- rep(c(T, F, F, T), length=length(x))
x[y]
```

> 論理値 `TRUE` を `T`、`FALSE` を `F` と短く表現できます。

### 実行結果

``` r
> x <- 1:10
> x[x > 5]
[1]  6  7  8  9 10
> x[x %% 2 == 0]
[1]  2  4  6  8 10
> y <- rep(c(T, F, F, T), length=length(x))
> x[y]
[1] 1 4 5 8 9
```

---

## ベクトルを処理する関数

* `sum` 関数によってベクトルの要素の合計を取得できる
* `length` 関数によってベクトルの長さ（要素数）を取得できる
* `mean` 関数によってベクトルの要素の平均値を取得できる

### `vec7.R`

```r
x <- 1:10
sum(x)
length(x)
mean(x)
```

### 実行結果

```r
> x <- 1:10
> sum(x)
[1] 55
> length(x)
[1] 10
> mean(x)
[1] 5.5
```
---

## ラベル付きベクトル

* `c` 関数でベクトルを生成する際、名前付き引数で値を定義できる
* 名前付き引数を使うと生成されたベクトルにラベルが付与される
* ベクトルの要素取得時にラベルを指定できる

### `vec8.R`

```r
prices <- c(a = 100, b = 200, c = 300)
prices
prices["a"]
```

### 実行結果

```r
> prices <- c(a = 100, b = 200, c = 300)
> prices
  a   b   c 
100 200 300 
> prices["a"]
  a 
100 
```

---

## ベクトル要素のラベル付け

* `names` 関数によってベクトル要素にラベルを付与できる
* `names` 関数によってベクトル要素からラベル一覧を取得できる

### `vec9.R`

```r
prices <- c(100, 200, 300)
names(prices) <- c("Apple", "Banana", "Cherry")
prices
names(prices)
```

> `<-` の右辺に `names` 関数を利用できます。

### 実行結果

```r
> prices <- c(100, 200, 300)
> names(prices) <- c("Apple", "Banana", "Cherry")
> prices
 Apple Banana Cherry 
   100    200    300 
> names(prices)
[1] "Apple"  "Banana" "Cherry"
```

---
