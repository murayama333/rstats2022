# 行列の操作

## 行列（matrix）の生成

* `matrix` 関数によって行列（Matrix）を生成できる

### `mat1.R`

``` r
v <- 1:12
m <- matrix(data = v)
m
```

### 実行結果

``` r
> v <- 1:12
> m <- matrix(data = v)
> m
      [,1]
 [1,]    1
 [2,]    2
 [3,]    3
 [4,]    4
 [5,]    5
 [6,]    6
 [7,]    7
 [8,]    8
 [9,]    9
[10,]   10
[11,]   11
[12,]   12
```

> この場合、12行、1列の行列となる。

---

## 行列の生成 - 2

+ `matrix` 関数の `nrow` 引数で行数を指定できる
+ `matrix` 関数の `ncol` 引数で列数を指定できる

### `mat2.R`

``` r
v <- 1:12
m <- matrix(data = v, nrow = 3)
m
```

### 実行結果

``` r
> v <- 1:12
> m <- matrix(data = v, nrow = 3)
> m
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12
```

> 引数 `nrow` を `ncol` に変更してみましょう。

---

## 行列の生成 - 3

+ `matrix` 関数で生成した行列はデフォルトで列方向（縦）に並ぶ
+ `matrix` 関数の `byrow` 引数でデータを行方向（横）に並べることもできる

### `mat3.R`

``` r
v <- 1:12
m <- matrix(data = v, ncol = 6, byrow = TRUE)
m
```

### 実行結果

``` r
> v <- 1:12
> m <- matrix(data = v, ncol = 6, byrow = TRUE)
> m
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    2    3    4    5    6
[2,]    7    8    9   10   11   12
```

---

## 行列の参照

+ `nrow` 関数、`ncol` 関数で行列の行数、列数を取得できる
+ `dim` 関数で行列の行数、列数をまとめて取得できる
+ `length` 関数で行列の要素数を取得できる

### `mat4.R`

``` r
v <- 1:12
m <- matrix(data = v, nrow = 3)
nrow(m)
ncol(m)
dim(m)
length(m)
```

### 実行結果

``` r
> v <- 1:12
> m <- matrix(data = v, nrow = 3)
> nrow(m)
[1] 3
> ncol(m)
[1] 4
> dim(m)
[1] 3 4
> length(m)
[1] 12
```

---

## 行列の参照 - 2

* 行列の要素にアクセスするためには2つの要素番号を指定する
* 要素番号の指定を省略することもできる
* 要素番号の範囲指定や除外指定などもできる

### `mat5.R`

``` r
v <- 1:12
m <- matrix(data = v, nrow = 3)
m[2, 3]
m[2, ]
m[2:3, ]
m[-2, ]
m[, 3]
m[, 2:3]
m[, -1]
```

### 実行結果

``` r
> v <- 1:12
> m <- matrix(data = v, nrow = 3)
> m[2, 3]
[1] 8
> m[2, ]
[1]  2  5  8 11
> m[2:3, ]
     [,1] [,2] [,3] [,4]
[1,]    2    5    8   11
[2,]    3    6    9   12
> m[-2, ]
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    3    6    9   12
> m[, 3]
[1] 7 8 9
> m[, 2:3]
     [,1] [,2]
[1,]    4    7
[2,]    5    8
[3,]    6    9
> m[, -1]
     [,1] [,2] [,3]
[1,]    4    7   10
[2,]    5    8   11
[3,]    6    9   12
```

---

## 行列のラベル付け

* `rownames` 関数で行ラベルを付与できる
* `colnames` 関数で列ラベルを付与できる
* 付与した行ラベル、列ラベルで要素にアクセスできる

### `mat6.R`

``` r
v <- 1:12
m <- matrix(data = v, nrow = 3)
rownames(m) <- c("r1", "r2", "r3")
colnames(m) <- c("c1", "c2", "c3", "c4")
m
```

### 実行結果

``` r
> v <- 1:12
> m <- matrix(data = v, nrow = 3)
> rownames(m) <- c("r1", "r2", "r3")
> colnames(m) <- c("c1", "c2", "c3", "c4")
> m
   c1 c2 c3 c4
r1  1  4  7 10
r2  2  5  8 11
r3  3  6  9 12
```

> `m["r1", "c2"]` のように要素にアクセスできます。

---

## 行列の連結

* `rbind` 関数で2つの行列を行方向（横）に連結できる
* `cbind` 関数で2つの行列を列方向（縦）に連結できる

### `mat7.R`

``` r
m1 <- matrix(data = 1:6, nrow = 2)
m2 <- matrix(data = 7:12, nrow = 2)
rbind(m1, m2)
cbind(m1, m2)
```

### 実行結果

``` r
> m1 <- matrix(data = 1:6, nrow = 2)
> m2 <- matrix(data = 7:12, nrow = 2)
> rbind(m1, m2)
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
[3,]    7    9   11
[4,]    8   10   12
> cbind(m1, m2)
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    3    5    7    9   11
[2,]    2    4    6    8   10   12
```

---

